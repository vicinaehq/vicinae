#!/usr/bin/make -f

export DH_VERBOSE = 1
export DEB_BUILD_MAINT_OPTIONS = hardening=+all

%:
	dh $@

override_dh_auto_configure:
	dh_auto_configure -- \
		-G Ninja \
		-DCMAKE_BUILD_TYPE=Release \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DVICINAE_PROVENANCE=deb \
		-DUSE_SYSTEM_PROTOBUF=ON \
		-DUSE_SYSTEM_ABSEIL=ON \
		-DUSE_SYSTEM_CMARK_GFM=ON \
		-DINSTALL_BROWSER_NATIVE_HOST=ON \
		-DLTO=OFF

override_dh_auto_build:
	dh_auto_build -- -j$$(nproc)

override_dh_strip:
	dh_strip --no-automatic-dbgsym

override_dh_shlibdeps:
	dh_shlibdeps --dpkg-shlibdeps-params=--ignore-missing-info
