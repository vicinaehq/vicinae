syntax = "proto3";

package proto.ext.daemon;

message UrlResponse {
  // empty string if no error
  string error = 1;
};

message UrlRequest {
  string url = 1;
};

message PingRequest {
};

message PingResponse {
};

message DmenuRequest {
  string raw_content = 1;
  string navigation_title = 2;
  string placeholder = 3;
  bool no_icon = 4;
  string section_title = 5;
  bool no_section = 6;
};

message LaunchAppRequest {
  string app_id = 1;
  repeated string args = 2;
  bool new_instance = 3;
};

message LaunchAppResponse {
  string error = 1;
  string focused_window_title = 2;
};

message DmenuResponse {
  string output = 1;
};

message Request {
  oneof payload {
    PingRequest ping = 1;
    UrlRequest url = 2;
    DmenuRequest dmenu = 3;
    LaunchAppRequest launch_app = 4;
  };
};

message Response {
  oneof payload {
    PingResponse ping = 1;
    UrlResponse url = 2;
    DmenuResponse dmenu = 3;
    LaunchAppResponse launch_app = 4;
  };
};
