syntax = "proto3";

package proto.ext.daemon;

message UrlResponse {
  // empty string if no error
  string error = 1;
};

message UrlRequest {
  string url = 1;
};

message PingRequest {
};

message PingResponse {
};

message DmenuRequest {
  string raw_content = 1;
  string navigation_title = 2;
  string placeholder = 3;
  string section_title = 4;
  bool no_section = 5;
  bool no_quick_look = 6;
  bool no_icon = 7;
  bool no_metadata = 8;
  string query = 9;
};

message LaunchAppRequest {
  string app_id = 1;
  repeated string args = 2;
  bool new_instance = 3;
};

message LaunchAppResponse {
  string error = 1;
  string focused_window_title = 2;
};

message ListAppsRequest {
  bool with_actions = 1;
};

message AppInfo {
  string id = 1;
  string name = 2;
  bool hidden = 3;
  string path = 4;
  string description = 5;
  string program = 6;
  bool is_terminal_app = 7;
  repeated string keywords = 8;
  string icon_url = 9;
  bool is_action = 10;
};

message ListAppsResponse {
  repeated AppInfo apps = 1;
};

message DmenuResponse {
  string output = 1;
};

message Request {
  oneof payload {
    PingRequest ping = 1;
    UrlRequest url = 2;
    DmenuRequest dmenu = 3;
    LaunchAppRequest launch_app = 4;
    ListAppsRequest list_apps = 5;
  };
};

message Response {
  oneof payload {
    PingResponse ping = 1;
    UrlResponse url = 2;
    DmenuResponse dmenu = 3;
    LaunchAppResponse launch_app = 4;
    ListAppsResponse list_apps = 5;
  };
};
